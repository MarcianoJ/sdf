module templatelang-to-esv-4

language TemplateLang
target language EditorService

target setup [[
  module example
  completions
]]

test completion templates for lexical syntax [[
  lexical syntax
    "||" -> BoolMethodId
]]
build generate-esv-abstract to [[
  completion template BoolMethodId: "||" = "||"
]]

test completion templates for lexical syntax (sugared) [[
  lexical syntax
    BoolMethodId = "||"
]]
build generate-esv-abstract to [[
  completion template BoolMethodId: "||" = "||"
]]

test completion templates from lexical syntax expanded [[
  lexical syntax
    BoolMethodId = "||"
  templates
    Exp.BinOp = <<Exp> <BoolMethodId> <Exp>>
]]
build generate-esv-abstract to [[
  completion template BoolMethodId: "||" = "||"
  completion template Exp: "Exp || Exp" = <Exp:Exp> " " <||:BoolMethodId> " " <Exp:Exp>
]]

test no completion template for reject production [[
  lexical syntax
    "if" -> ID {reject}
]]
build generate-esv-abstract to [[
]]

test no expansion for reject production [[
  lexical syntax
    "if" -> ID {reject}
  templates
    Exp.Var = <*<ID>>
]]
build generate-esv-abstract to [[
	completion template Exp: "*ID" = "*" <ID:ID>
]]
